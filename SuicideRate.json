{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title":{"text":"Suicides (per 100,000 population) around the world",
        "fontSize": 20
  },
  "width": 1280,
  "height": 600,
  "background": null,
  "projection": {"type": "equalEarth"},
  "layer": [
    {
      "data":{
      "url": "ne_50m_ocean.json",
      "format":{"type": "topojson", "feature":"ne_50m_ocean"}},

      "mark":{"type": "geoshape","fill":"skyblue","stroke":"lightblue","strokeWidth":0}
    },
    {"data": {
    "url": "ne_110m.json",
    "format": {"type": "topojson", "feature":"ne_110m_admin_0_countries"}}, 

    "mark": {"type": "geoshape","stroke":"black","strokeWidth":0.5,"fill":"gray"}
  },
  {"data": {
    "url": "ne_110m.json",
    "format": {"type": "topojson", "feature":"ne_110m_admin_0_countries"}},

  "transform": [
    {
      "lookup": "properties.ISO_A3_EH",
      "from": {
        "data": {
          "url": "Countrydata.csv"
        },
        "key": "ISO 3 country code",
        "fields": ["suicidemortalityrate","country","continent","population","unemployment","MillionGDP"]
      }
    }
    
  ],  
  "mark": {"type": "geoshape","stroke":"black","strokeWidth":0.5},
  "encoding": {
    "color": {
      "field": "suicidemortalityrate",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [10,20,30,50,70 ],
        "range": ["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"]
      },
      "legend": {
        "title": null
      }
    },
    "tooltip": [
          {"field": "country", "type": "nominal", "title":"Country"},
          {"field": "continent", "type": "nominal", "title":"Continent"},
          {"field": "population", "type": "quantitative", "format": ".3s", "title":"Population (people)"},
          {"field": "suicidemortalityrate", "type": "quantitative", "format": ",", "title":"Suicide rate per 100,000 population"},
          {"field": "unemployment", "type": "quantitative", "format": ",", "title":"Unemployment (%)"},
          {"field": "MillionGDP", "type": "quantitative", "format": ".3s", "title":"GPD (Million USD)"}
        ] 
  }
  },
  {
   "data": {
    "url": "ne_110m.json",
    "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
  }, 
  "mark": {"type": "geoshape","stroke":"grey","strokeWidth":0.25,"fill":null}
  }
  ],
  "config": {
    "legend": {
      "orient": "top", 
      "layout": {"top": {"anchor": "middle"}},
      "padding":10,
      "offset": 10
    }
  }
}